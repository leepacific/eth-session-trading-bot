# π€ μλ™ μµμ ν™” μ‹μ¤ν… κ°€μ΄λ“

## π― μ‹μ¤ν… κ°μ”

### π“ μµμ ν™” λ©ν‘
- **Profit Factor**: β‰¥ 2.5 (λ©ν‘: 3.5+)
- **Sortino Ratio**: β‰¥ 2.0 (λ©ν‘: 3.0+)
- **Win Rate**: 45-65% (λ©ν‘: 55%)
- **Max Drawdown**: β‰¤ 20% (λ©ν‘: β‰¤15%)
- **SQN**: β‰¥ 3.0 (λ©ν‘: 4.0+)
- **Calmar Ratio**: β‰¥ 3.0 (λ©ν‘: 4.0+)

### β° μ‹¤ν–‰ μ¤μΌ€μ¤„
- **μ‹κ°„**: λ§¤μ£Ό μΌμ”μΌ 14:00 KST
- **μ†μ”μ‹κ°„**: μ•½ 90λ¶„
- **μ™„λ£μ‹κ°„**: 15:30 KST (μΌμ”μΌ μ¤ν›„)

## π› οΈ μ„¤μΉ λ° μ„¤μ •

### 1. Railway ν™κ²½λ³€μ μ¶”κ°€
```env
ENABLE_AUTO_OPTIMIZATION=true
OPTIMIZATION_SCHEDULE=weekly
RESOURCE_LIMIT_CPU=0.7
RESOURCE_LIMIT_MEMORY=0.7
OPTIMIZATION_TIMEZONE=Asia/Seoul
```

### 2. ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬ (μλ™ μ„¤μΉλ¨)
- `optuna`: λ² μ΄μ§€μ• μµμ ν™”
- `apscheduler`: μ¤μΌ€μ¤„λ§
- `pytz`: μ‹κ°„λ€ μ²λ¦¬
- `psutil`: μ‹μ¤ν… λ¦¬μ†μ¤ λ¨λ‹ν„°λ§

## π”„ μµμ ν™” ν”„λ΅μ„Έμ¤

### 3λ‹¨κ³„ λ‹¤μ¤‘ν•΄μƒλ„ μµμ ν™”:

#### 1λ‹¨κ³„: λ¬ν”„ μ¤ν¬λ¦¬λ‹ (20λ¶„)
```
λ°μ΄ν„°: 50,000 ν¬μΈνΈ (μƒν”λ§)
λ°©λ²•: Sobol μ‹ν€€μ¤ 100 μƒν”
λ©ν‘: μƒμ„ 30% ν›„λ³΄ μ„ λ³„
```

#### 2λ‹¨κ³„: λ² μ΄μ§€μ• μµμ ν™” (50λ¶„)
```
λ°μ΄ν„°: 100,000 ν¬μΈνΈ
λ°©λ²•: TPE + ASHA μ΅°κΈ°μ¤‘λ‹¨
λ°λ³µ: 200 μ¤ν…
λ©ν‘: μƒμ„ 10κ° ν›„λ³΄ μ„ λ³„
```

#### 3λ‹¨κ³„: μµμΆ… κ²€μ¦ (20λ¶„)
```
λ°μ΄ν„°: μ „μ²΄ 206,319 ν¬μΈνΈ
λ°©λ²•: Walk-Forward κ²€μ¦
ν›„λ³΄: μƒμ„ 5κ°
λ©ν‘: μµμΆ… νλΌλ―Έν„° ν™•μ •
```

## π“ μµμ ν™” νλΌλ―Έν„°

### 12κ° ν•µμ‹¬ νλΌλ―Έν„°:
```python
{
    'swing_len': [3, 7],           # μ¤μ™ κΈΈμ΄
    'rr_percentile': [0.1, 0.8],  # λ³€λ™μ„± ν•„ν„°
    'disp_mult': [0.8, 2.0],      # λ””μ¤ν”λ μ΄μ¤λ¨ΌνΈ
    'sweep_wick_mult': [0.3, 0.8], # μ¤μ• κΌ¬λ¦¬
    'atr_len': [10, 50],          # ATR κΈΈμ΄
    'stop_atr_mult': [0.05, 0.15], # μ¤ν†± λ°°μ
    'target_r': [1.5, 4.0],       # λ©ν‘ Rλ°°μ
    'time_stop_bars': [1, 8],     # μ‹κ°„ μ¤ν†±
    'min_volatility_rank': [0.2, 0.7],
    'session_strength': [1.0, 2.5],
    'volume_filter': [1.0, 2.0],
    'trend_filter_len': [10, 50]
}
```

## π€ μ‹¤ν–‰ λ°©λ²•

### μλ™ μ‹¤ν–‰ (κ¶μ¥)
Railwayμ— λ°°ν¬ν•λ©΄ μλ™μΌλ΅ λ§¤μ£Ό μΌμ”μΌ 14:00μ— μ‹¤ν–‰λ©λ‹λ‹¤.

### μλ™ μ‹¤ν–‰ (ν…μ¤νΈμ©)
```bash
# μ¦‰μ‹ μµμ ν™” μ‹¤ν–‰
python auto_optimizer.py --now

# μ¤μΌ€μ¤„λ¬ μ‹μ‘ (λ€κΈ° λ¨λ“)
python auto_optimizer.py
```

## π“‹ κ²°κ³Ό νμΌ

### μλ™ μƒμ„±λλ” νμΌλ“¤:
1. **`optimization_result_YYYYMMDD_HHMMSS.json`**
   - μ „μ²΄ μµμ ν™” κ²°κ³Ό
   - κ° λ‹¨κ³„λ³„ μ„±κ³Ό
   - μ‹μ¤ν… μ •λ³΄

2. **`update_params_YYYYMMDD_HHMMSS.py`**
   - νλΌλ―Έν„° μ—…λ°μ΄νΈ μ¤ν¬λ¦½νΈ
   - μ¦‰μ‹ μ μ© κ°€λ¥

### κ²°κ³Ό μμ‹:
```json
{
  "timestamp": "20251015_180000",
  "duration_minutes": 87.5,
  "best_parameters": {
    "swing_len": 5,
    "rr_percentile": 0.295,
    "disp_mult": 1.101,
    "sweep_wick_mult": 0.539,
    "atr_len": 32,
    "stop_atr_mult": 0.075,
    "target_r": 3.072,
    "time_stop_bars": 1
  },
  "stage_results": {
    "stage1": {"best_score": 0.85},
    "stage2": {"best_score": 0.92},
    "stage3": {"best_score": 0.94}
  }
}
```

## π›΅οΈ λ¦¬μ†μ¤ κ΄€λ¦¬

### Railway λ¦¬μ†μ¤ μ ν• (70%):
- **CPU**: μµλ€ 70% μ‚¬μ©
- **λ©”λ¨λ¦¬**: μµλ€ 70% μ‚¬μ©
- **λ°°μΉ ν¬κΈ°**: λ©”λ¨λ¦¬ κΈ°λ° μλ™ μ΅°μ •
- **μ›μ»¤ μ**: CPU μ½”μ–΄ μμ 70%

### λ¨λ‹ν„°λ§:
```python
# μ‹¤μ‹κ°„ λ¦¬μ†μ¤ μ‚¬μ©λ¥  ν™•μΈ
import psutil

print(f"CPU: {psutil.cpu_percent()}%")
print(f"λ©”λ¨λ¦¬: {psutil.virtual_memory().percent}%")
```

## β οΈ μ£Όμμ‚¬ν•­

### 1. μ‹μ¤ν… μ•μ •μ„±
- Railway λ¬΄λ£ ν”λ: μ›” 500μ‹κ°„ μ ν•
- μµμ ν™” 1νλ‹Ή μ•½ 1.5μ‹κ°„ μ†μ”
- μ›” 4ν μ‹¤ν–‰ = 6μ‹κ°„ μ‚¬μ©

### 2. κ³Όμµμ ν™” λ°©μ§€
- Walk-Forward κ²€μ¦
- Out-of-Sample ν…μ¤νΈ
- νλΌλ―Έν„° λ―Όκ°λ„ λ¶„μ„
- μ μ•½ μ΅°κ±΄ κ°•μ  μ μ©

### 3. μ¤λ¥ μ²λ¦¬
- λ©”λ¨λ¦¬ λ¶€μ΅± μ‹ λ°°μΉ ν¬κΈ° μλ™ κ°μ†
- CPU κ³Όλ¶€ν• μ‹ μ›μ»¤ μ μλ™ μ΅°μ •
- λ„¤νΈμ›ν¬ μ¤λ¥ μ‹ μ¬μ‹λ„ λ΅μ§

## π“ μ„±κ³Ό λ¨λ‹ν„°λ§

### μ£Όκ°„ λ¦¬ν¬νΈ λ‚΄μ©:
1. **μµμ ν™” μ „ν›„ λΉ„κµ**
2. **ν•µμ‹¬ μ§€ν‘ λ³€ν™”**
3. **νλΌλ―Έν„° λ³€κ²½ μ‚¬ν•­**
4. **μ‹μ¤ν… λ¦¬μ†μ¤ μ‚¬μ©λ¥ **
5. **λ‹¤μ μ£Ό μμƒ μ„±κ³Ό**

### μ•λ¦Ό μ‹μ¤ν…:
- μµμ ν™” μ™„λ£ μ‹ κ²°κ³Ό μ”μ•½
- μ¤λ¥ λ°μƒ μ‹ μ•λ¦Ό
- μ„±κ³Ό κ°μ„ /μ•…ν™” μ‹ κ²½κ³ 

## π”§ λ¬Έμ  ν•΄κ²°

### μΌλ°μ μΈ λ¬Έμ λ“¤:

#### 1. λ©”λ¨λ¦¬ λ¶€μ΅±
```
μ¦μƒ: "MemoryError" λλ” ν”„λ΅μ„Έμ¤ μΆ…λ£
ν•΄κ²°: λ°°μΉ ν¬κΈ° μλ™ κ°μ†, λ°μ΄ν„° μƒν”λ§ μ¦κ°€
```

#### 2. μ‹κ°„ μ΄κ³Ό
```
μ¦μƒ: 90λ¶„ λ‚΄ μ™„λ£λμ§€ μ•μ
ν•΄κ²°: μƒν” μ κ°μ†, μ΅°κΈ° μ¤‘λ‹¨ μ„κ³„κ°’ μ΅°μ •
```

#### 3. μµμ ν™” μ‹¤ν¨
```
μ¦μƒ: λ¨λ“  μ‹λ„κ°€ μ μ•½ μ΅°κ±΄ μ„λ°
ν•΄κ²°: μ μ•½ μ΅°κ±΄ μ™„ν™”, νλΌλ―Έν„° λ²”μ„ μ΅°μ •
```

## π“ μμƒ κ°μ„  ν¨κ³Ό

### ν„μ¬ vs μµμ ν™” ν›„:
```
ν„μ¬ μ„±κ³Ό:
- Profit Factor: 3.03
- Win Rate: 60.8%
- Sortino Ratio: ~1.8

μμƒ μµμ ν™” ν›„:
- Profit Factor: 3.5-4.0
- Win Rate: 55-65%
- Sortino Ratio: 2.5-3.0
- Max DD: 15% μ΄ν•
- SQN: 4.0+
```

## π― μ„±κ³µ μ§€ν‘

### μµμ ν™” μ„±κ³µ κΈ°μ¤€:
- [ ] λ³µν•© μ μ 0.9 μ΄μƒ
- [ ] λ¨λ“  μ μ•½ μ΅°κ±΄ λ§μ΅±
- [ ] 3λ‹¨κ³„ λ¨λ‘ μ™„λ£
- [ ] 90λ¶„ λ‚΄ μ™„λ£
- [ ] νλΌλ―Έν„° μ•μ •μ„± ν™•μΈ

---

## π€ μ‹μ‘ν•κΈ°

1. **Railway ν™κ²½λ³€μ μ„¤μ •**
2. **μ½”λ“ λ°°ν¬ λ° ν™•μΈ**
3. **μ²« μ‹¤ν–‰ λ€κΈ°** (λ‹¤μ μΌμ”μΌ 18:00)
4. **κ²°κ³Ό ν™•μΈ λ° λ¶„μ„**
5. **μ§€μ†μ  λ¨λ‹ν„°λ§**

λ§¤μ£Ό μλ™μΌλ΅ μ „λµμ΄ κ°μ„ λμ–΄ λ” λ‚μ€ μ„±κ³Όλ¥Ό κΈ°λ€ν•  μ μμµλ‹λ‹¤! π‰