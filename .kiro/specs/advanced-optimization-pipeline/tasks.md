# Implementation Plan

- [x] 1. 고속 데이터 엔진 구현


  - Parquet 기반 데이터 저장소와 float32 다운캐스팅 구현
  - 지표 사전계산 및 ndarray 캐시 시스템 구현
  - Numba JIT 컴파일된 백테스팅 엔진 구현
  - Ray/Joblib 병렬 처리 설정 및 MKL 스레딩 제어
  - _Requirements: 1.1, 1.2, 1.3, 1.4_


- [x] 2. 성과 평가 및 제약 시스템 구현



  - Score = 0.35·Sortino + 0.25·Calmar + 0.20·PF + 0.20·SQN − λ·MaxDD 공식 구현
  - 제약 조건 검증 시스템 (PF≥1.8, Sortino≥1.5, etc.) 구현
  - 메디안 기반 집계 및 IQR 우선순위 로직 구현
  - DD 패널티 λ=0.5~1.0 적용 시스템 구현
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [x] 3. 2단계 최적화 엔진 구현





- [x] 3.1 초기 전역 탐색 구현





  - Sobol/LHS 120점 샘플링 알고리즘 구현
  - 다중충실도 10k→30k→50k 데이터 처리 구현
  - ASHA 조기중단 (η=3, 70%→60% 컷) 구현
  - 스크리닝 필터 (PF≥1.4 ∧ MinTrades≥80) 구현
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 3.2 국소 정밀 탐색 구현


  - TPE/GP + EI 40스텝 베이지안 최적화 구현
  - 제약 조건 위반 시 큰 음수 반환 로직 구현
  - Top-12 → Top-5 후보 선별 시스템 구현
  - _Requirements: 3.4, 3.5_

- [x] 4. 시계열 검증 시스템 구현


  - Purged K-Fold=5 + Embargo=평균보유기간×2 구현
  - fold별 Score 메디안 − DD 패널티 랭킹 구현
  - Top-3 파라미터 승급 시스템 구현
  - 데이터 누수 방지 검증 로직 구현
  - _Requirements: 4.1, 4.2, 4.3_

- [x] 5. 워크포워드 분석 엔진 구현


- [x] 5.1 슬라이스 관리 시스템 구현



  - Train 9개월 / Test 2개월, 8슬라이스 롤링 구현
  - 변동성 레짐별 슬라이싱 로직 구현
  - 슬라이스별 최적 파라미터 도출 시스템 구현
  - _Requirements: 5.1, 5.2_

- [x] 5.2 OOS 검증 시스템 구현

  - OOS 합격선 검증 (PF_OOS≥1.8, Sortino_OOS≥1.5, etc.) 구현
  - OOS 메디안 기준 선택 로직 구현
  - 실전 복제 조건 검증 시스템 구현
  - _Requirements: 5.3, 5.4_

- [x] 6. 몬테카를로 시뮬레이션 엔진 구현


- [x] 6.1 부트스트랩 시스템 구현


  - Block Bootstrap (블록길이=ACF 반감기) 구현
  - Trade Resampling (승/패·익절/손절 구조 보존) 구현
  - Execution Noise (슬리피지 ±σ, 스프레드 확장) 구현
  - Parameter Perturbation (최종 파라 ±10%) 구현
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [x] 6.2 시뮬레이션 실행 및 검증 구현

  - 1,000–2,000회 반복 시뮬레이션 구현
  - 합격선 검증 (PF_p5≥1.5, Sortino_p5≥1.2, etc.) 구현
  - 견고성 및 민감도 분석 구현
  - _Requirements: 6.5, 6.6_

- [x] 7. 통계적 검증 시스템 구현



  - Deflated Sortino (Bailey) 다중가설 보정 구현
  - White's Reality Check / SPA 우연성 검정 구현
  - 0.6·(MC p5) + 0.4·(WFO-OOS median) 가중합 선택 구현
  - Top-1~2 시스템 최종 선택 로직 구현
  - _Requirements: 7.1, 7.2, 7.3_

- [x] 8. 켈리 포지션 사이징 시스템 구현



- [x] 8.1 켈리 계산 엔진 구현

  - 계좌 잔고 1000USDT 미만 시 20USDT 최소 주문 로직 구현
  - 계좌 잔고 1000USDT 이상 시 켈리 0.5 계산 구현
  - 최소 주문금액 20USDT 보장 로직 구현
  - _Requirements: 8.1, 8.2, 8.3_

- [x] 8.2 DD 연동 감쇠 시스템 구현


  - DD 10%마다 베팅 20% 축소 로직 구현
  - 동적 포지션 사이징 조정 시스템 구현
  - 리스크 관리 통합 구현
  - _Requirements: 8.4_

- [x] 9. 운영 안전장치 시스템 구현



- [x] 9.1 실시간 모니터링 시스템 구현


  - 일중 손실한도 및 연속손실 n회 자동 정지 구현
  - 유동성 필터 (스프레드·체결량) 구현
  - 실시간 지연 < 바 주기 20% 모니터링 구현
  - _Requirements: 9.1, 9.2, 9.3_

- [x] 9.2 장애 대응 시스템 구현


  - 비용 2× 스트레스 테스트 재검증 구현
  - 장애시 안전축소/청산 플래그 시스템 구현
  - 자동 복구 및 알림 시스템 구현
  - _Requirements: 9.4, 9.5_

- [x] 10. 통합 최적화 파이프라인 구현

- [x] 10.1 파이프라인 오케스트레이션 구현

  - 전체 워크플로우 통합 실행 시스템 구현
  - 단계별 결과 검증 및 전달 구현
  - 실패 시 롤백 및 재시도 로직 구현
  - 진행상황 모니터링 및 로깅 구현

- [x] 10.2 성능 최적화 및 배포 준비 구현
  - 메모리 사용량 최적화 및 캐시 관리 구현
  - 병렬 처리 성능 튜닝 구현
  - 결과 저장 및 히스토리 관리 구현
  - Railway 배포 환경 설정 및 테스트 구현

- [x] 11. 테스트 및 검증 시스템 구현
- [x] 11.1 단위 테스트 구현
  - 데이터 엔진 컴포넌트 테스트 작성
  - 최적화 알고리즘 테스트 작성
  - 통계 함수 테스트 작성
  - 포지션 사이징 계산 테스트 작성

- [x] 11.2 통합 테스트 구현
  - 전체 최적화 파이프라인 테스트 작성
  - 워크포워드 검증 워크플로우 테스트 작성
  - 몬테카를로 시뮬레이션 체인 테스트 작성
  - 켈리 포지션 사이징 통합 테스트 작성

- [x] 11.3 성능 및 검증 테스트 구현
  - 최적화 속도 벤치마크 테스트 작성
  - 메모리 사용량 프로파일링 테스트 작성
  - 히스토리컬 백테스트 비교 테스트 작성
  - 리스크 관리 검증 테스트 작성