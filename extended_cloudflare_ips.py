#!/usr/bin/env python3
"""
확장된 Cloudflare IP 목록 생성
실제 사용되는 IP 범위를 더 포괄적으로 커버
"""

def get_extended_cloudflare_ips():
    """확장된 Cloudflare IP 목록"""
    
    # 기존 30개 + 추가 70개 = 총 100개
    extended_ips = [
        # 기존 30개 (이미 바이낸스에 추가됨)
        "104.16.0.1", "104.16.1.1", "104.16.2.1", "104.16.3.1", "104.16.4.1",
        "104.17.0.1", "104.17.1.1", "104.17.2.1", "104.17.3.1", "104.17.4.1",
        "104.18.0.1", "104.18.1.1", "104.18.2.1", "104.18.3.1", "104.18.4.1",
        "172.64.0.1", "172.64.1.1", "172.64.2.1", "172.64.3.1", "172.64.4.1",
        "173.245.48.1", "173.245.49.1", "173.245.50.1", "173.245.51.1", "173.245.52.1",
        "198.41.128.1", "198.41.129.1", "198.41.130.1", "198.41.131.1", "198.41.132.1",
        
        # 추가 104.16.x.x 범위 (20개)
        "104.16.5.1", "104.16.6.1", "104.16.7.1", "104.16.8.1", "104.16.9.1",
        "104.16.10.1", "104.16.11.1", "104.16.12.1", "104.16.13.1", "104.16.14.1",
        "104.16.15.1", "104.16.16.1", "104.16.17.1", "104.16.18.1", "104.16.19.1",
        "104.16.20.1", "104.16.21.1", "104.16.22.1", "104.16.23.1", "104.16.24.1",
        
        # 추가 104.17.x.x 범위 (20개)
        "104.17.5.1", "104.17.6.1", "104.17.7.1", "104.17.8.1", "104.17.9.1",
        "104.17.10.1", "104.17.11.1", "104.17.12.1", "104.17.13.1", "104.17.14.1",
        "104.17.15.1", "104.17.16.1", "104.17.17.1", "104.17.18.1", "104.17.19.1",
        "104.17.20.1", "104.17.21.1", "104.17.22.1", "104.17.23.1", "104.17.24.1",
        
        # 추가 172.64.x.x 범위 (15개)
        "172.64.5.1", "172.64.6.1", "172.64.7.1", "172.64.8.1", "172.64.9.1",
        "172.64.10.1", "172.64.11.1", "172.64.12.1", "172.64.13.1", "172.64.14.1",
        "172.64.15.1", "172.64.16.1", "172.64.17.1", "172.64.18.1", "172.64.19.1",
        
        # 추가 198.41.x.x 범위 (15개)
        "198.41.133.1", "198.41.134.1", "198.41.135.1", "198.41.136.1", "198.41.137.1",
        "198.41.138.1", "198.41.139.1", "198.41.140.1", "198.41.141.1", "198.41.142.1",
        "198.41.143.1", "198.41.144.1", "198.41.145.1", "198.41.146.1", "198.41.147.1"
    ]
    
    return extended_ips

def main():
    """메인 실행"""
    print("🌐 확장된 Cloudflare IP 목록")
    print("=" * 80)
    
    extended_ips = get_extended_cloudflare_ips()
    
    print(f"📊 총 IP 개수: {len(extended_ips)}개")
    print(f"📋 추가할 새로운 IP들 (기존 30개 제외):")
    print()
    
    # 기존 30개 제외하고 새로운 IP만 표시
    existing_ips = [
        "104.16.0.1", "104.16.1.1", "104.16.2.1", "104.16.3.1", "104.16.4.1",
        "104.17.0.1", "104.17.1.1", "104.17.2.1", "104.17.3.1", "104.17.4.1",
        "104.18.0.1", "104.18.1.1", "104.18.2.1", "104.18.3.1", "104.18.4.1",
        "172.64.0.1", "172.64.1.1", "172.64.2.1", "172.64.3.1", "172.64.4.1",
        "173.245.48.1", "173.245.49.1", "173.245.50.1", "173.245.51.1", "173.245.52.1",
        "198.41.128.1", "198.41.129.1", "198.41.130.1", "198.41.131.1", "198.41.132.1"
    ]
    
    new_ips = [ip for ip in extended_ips if ip not in existing_ips]
    
    print("바이낸스에 추가로 등록할 IP들:")
    for i, ip in enumerate(new_ips, 1):
        print(f"{i:2d}. {ip}")
    
    print(f"\n📋 바이낸스 설정 방법:")
    print("1. https://www.binance.com/en/my/settings/api-management")
    print("2. API 키 편집 → IP Access Restrictions")
    print("3. 위의 70개 IP를 기존 30개에 추가")
    print("4. 총 100개 IP로 확장")
    
    print(f"\n💡 이론적 근거:")
    print("- Cloudflare는 전 세계 200+ 데이터센터 운영")
    print("- 각 데이터센터마다 다른 송신 IP 사용 가능")
    print("- 더 많은 IP 범위를 커버하여 성공 확률 증가")
    
    # 파일로 저장
    with open('extended_cloudflare_ips.txt', 'w') as f:
        f.write("확장된 Cloudflare IP 목록 (총 100개)\\n")
        f.write("=" * 50 + "\\n\\n")
        f.write("기존 30개 (이미 추가됨):\\n")
        for ip in existing_ips:
            f.write(f"{ip}\\n")
        f.write("\\n추가할 70개:\\n")
        for ip in new_ips:
            f.write(f"{ip}\\n")
    
    print(f"\n📄 IP 목록 저장: extended_cloudflare_ips.txt")

if __name__ == "__main__":
    main()